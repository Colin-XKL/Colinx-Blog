<div id="gitalk-container"></div>
<div class='js-toc'></div>

<script>
    let meta = document.querySelectorAll('.post:not(.on-list) .post-meta')[0];
    const visitors = `<span id="busuanzi_container_page_pv" style='display:none'> 浏览：<span id="busuanzi_value_page_pv"></span>次</span>`
    if (meta) meta.innerHTML = meta.innerHTML + visitors
</script>

<script>
    function tocbot_init() {
        tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.js-toc',
            // Where to grab the headings to build the table of contents.
            contentSelector: '.post-content',
            // Which headings to grab inside of the contentSelector element.
            headingSelector: 'h1, h2, h3',
            // For headings inside relative or absolute positioned containers within content.
            hasInnerContainers: true,
        });
    }
    function init_gitalk() {
        const gitalk = new Gitalk({
            clientID: '94eae56b89dcc480bf4d',
            clientSecret: '1e4218c0293a998a9483ab09ba9ace46cabc76b3',
            repo: 'Colinx-Blog',      // The repository of store comments,
            owner: 'Colin-XKL',
            admin: ['Colin-XKL'],
            id: decodeURI(location.pathname),  // Ensure uniqueness and length less than 50
            distractionFreeMode: false  // Facebook-like distraction free mode
        });
        gitalk.render('gitalk-container');
    }
</script>
<script defer 
    onerror="fallbackJSloader('https://cdn.staticaly.com/gh/panr/hugo-theme-hello-friend/master/static/assets/prism.js')"
    src="{{ "assets/prism.js" | absURL }}"></script>

<script defer onload="tocbot_init()"
    onerror="fallbackJSloader('https://cdn.staticfile.org/tocbot/4.9.1/tocbot.min.js','tocbot_init')"
    src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
<link rel="stylesheet" 
onerror="fallbackCSSloader('https://cdn.staticfile.org/tocbot/4.9.1/tocbot.css')"

href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.css">
<script defer onload="init_gitalk()"
    onerror="fallbackJSloader('https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.js','init_gitalk')"
    src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<link rel="stylesheet" 
    onerror="fallbackCSSloader('https://cdn.staticfile.org/gitalk/1.7.2/gitalk.css')"
    href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">
<!-- no min css version fallback for gitalk css -->